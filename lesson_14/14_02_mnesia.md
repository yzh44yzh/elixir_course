# Mnesia 

Поверх DETS построена полноценная база данных Mnesia. 

- полноценный язык запросов
- вторичные индексы
- транзакции
- распределенное хранилище в кластере с автоматической синхронизацией данных между нодами.

У DETS и Mnesia есть неприятные особенности.

DETS не может хранить больше 2Гб данных. При больших объемах нужно шардировать данные на несколько таблиц.

Хуже всего, что нет полноценного WAL. Из-за этого, если DETS падает с ошибкой, то восстановление данных может занять очень много времени. Крайне неприятно, что запуск ноды после аварии занимает несколько десятков минут, а то и несколько часов. И все это время ваш сервер не может обслуживать клиентов.

Из-за этого Mnesia не рекомендуется в роли персистентного хранилища. Но в роли in-memory хранилища хороша.

ETS и Mnesia делают ненужными внешние in-memory хранилища, такие как Redis или Memcached. Т.к. находятся непосредственно в памяти виртуальной машины и не имеют накладных расходов на передачу данных через сокет и сериализацию/десериализацию.

Распределенная Mnesia не имеет защиты от net split. Есть некоторые средства, чтобы исправить ситуацию вручную. Но проще перегрузить кластер и начать заново с пустого состояния.
